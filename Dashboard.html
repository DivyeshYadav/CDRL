<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background: #f4f6f8;
        }

        /* Header */
        header {
            background: #007bff;
            color: white;
            padding: 15px 25px;
            font-size: 24px;
            display: flex;
            align-items: center;
        }

        /* Container with sidebar + main */
        .container {
            display: flex;
            gap: 20px;
            max-width: 1200px;
            margin: 20px auto;
        }

        /* Sidebar */
        .sidebar {
            width: 220px;
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .sidebar button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        .sidebar button:hover {
            background: #0056b3;
        }

        /* Main content */
        .main {
            flex-grow: 1;
        }

        /* Cards */
        .cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: #fff;
            padding: 30px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            font-weight: bold;
            font-size: 18px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .card:hover {
            transform: translateY(-5px);
            background: #e0e0e0;
        }

        /* Add Patient Form */
        #addPatientForm {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        #addPatientForm h2 {
            margin-top: 0;
        }

        #addPatientForm div {
            margin-bottom: 15px;
        }

        #addPatientForm input,
        #addPatientForm select {
            padding: 8px;
            width: calc(33% - 10px);
            margin-right: 10px;
        }

        #addPatientForm select {
            width: auto;
        }

        /* Report Entry Table */
        #reportEntry table {
            width: 100%;
            border-collapse: collapse;
        }

        #reportEntry th,
        #reportEntry td {
            border: 1px solid #000;
            padding: 8px;
            text-align: center;
        }

        .delete-btn {
            background: red;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        /* Responsive */
        @media(max-width: 768px) {
            .container {
                flex-direction: column;
            }

            #addPatientForm input,
            #addPatientForm select {
                width: 100%;
                margin-bottom: 10px;
            }
        }
    </style>
</head>

<body>

    <header>üè• Laboratory Dashboard</header>

    <div class="container">
        <div class="sidebar">
            <button onclick="showAddPatientForm()">Add New Patient</button>
            <button onclick="showReportEntry()">Report Entry List</button>
              <button onclick="logout()">Logout</button>
        </div>

        <div class="main">
            <!-- Cards -->
            <div class="cards-container">
                <div class="card" onclick="showAddPatientForm()">Add New Patient</div>
                <div class="card" onclick="showReportEntry()">Report Entry List</div>
            </div>

            <!-- Add Patient Form -->
            <div id="addPatientForm" style="display:none;">
                <h2>Add New Patient</h2>
                <div>
                    <input id="firstName" placeholder="First Name">
                    <input id="middleName" placeholder="Middle Name">
                    <input id="lastName" placeholder="Last Name">
                </div>
                <div>
                    <label>Requested By:</label>
                    <select id="requestedBy">
                        <option value="">--Select--</option>
                        <option>BGH Polyclinic</option>
                        <option>HandC Polyclinic</option>
                        <option>Paras Hospital</option>
                        <option>Koshi Hospital</option>
                        <option>Janta Polyclinic</option>
                        <option>Janki Polyclinic</option>
                        <option>Utsav Pathalogy</option>
                        <option>Nobel Hospital</option>
                        <option>New Thakur Polyclinic</option>
                    </select>

                    <label>Referred By:</label>
                    <select id="referredBy">
                        <option value="">--Select--</option>
                        <option>Self</option>
                        <option>Dr.Roshan Yadav</option>
                        <option>Dr.Alok Jha</option>
                        <option>Dr.Ramnarayan Chaudhary</option>
                        <option>Dr.Roshan Khadka</option>
                        <option>Dr.Rameshwor Yadav</option>
                        <option>Dr.Nand Kishor Chaudhary</option>
                        <option>Dr.Jibnath Dhamala</option>
                        <option>Dr.Alok Bhandari</option>
                        <option>Koshi Hospital</option>
                        <option>Dr.Biva Mandal</option>
                        <option>Dr.Praful Koirala</option>
                        <option>Dr.Manoj Kumar Thakur</option>
                        <option>Dr.Shradhha Shrestha</option>
                        <option>Dr.Tulashi Mahato</option>
                        <option>Dr.Sachidanand Das</option>
                        <option>Dr.Rajeswar Yadav</option>
                    </select>
                </div>
                <div>
                    <input id="sex" placeholder="Sex">
                    <input id="age" placeholder="Age">
                    <input id="contact" placeholder="Contact Number">
                </div>
                <div>
                    <input id="date" type="date" placeholder="Date">
                    <input id="nepaliDate" placeholder="Nepali Date">
                    <input id="paymentStatus" placeholder="Payment Status">
                </div>
                <div>
                    <label>Test Name:</label>
                    <select id="testName">
                        <option value="Medium Tissue Biopsy Test">Medium Tissue Biopsy Test</option>
                    </select>
                </div>
                <button onclick="addPatient()">Add Patient</button>
            </div>

            <!-- Report Entry List -->
            <div id="reportEntry" style="display:none;">
                <h2>Report Entry List</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Patient Name</th>
                            <th>Bill Code</th>
                            <th>Test Name</th>
                            <th>Requested By</th>
                            <th>Referred By</th>
                            <th>Sex</th>
                            <th>Age</th>
                            <th>Contact</th>
                            <th>Date</th>
                            <th>Nepali Date</th>
                            <th>Sample Number</th>
                            <th>Payment Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="patientTable"></tbody>
                </table>
            </div>

        </div>
    </div>

    <script>
        let patients = JSON.parse(localStorage.getItem("patients")) || [];
        let billCodeCounter = 1000;
        let sampleNumberCounter = 100;

        function showAddPatientForm() {
            document.getElementById("addPatientForm").style.display = "block";
            document.getElementById("reportEntry").style.display = "none";
        }
        function showReportEntry() {
            document.getElementById("addPatientForm").style.display = "none";
            document.getElementById("reportEntry").style.display = "block";
            renderPatients();
        }
        function logout() {
                // Clear any logged-in data
                localStorage.removeItem("loggedInUser"); // if you store user info
                localStorage.removeItem("patients");     // optional: clear patient data
                localStorage.removeItem("selectedPatient"); // optional: clear selected patient

                // Redirect to login page
                window.location.href = "login.html"; // change this to your login page
            }


        function generateBillCode() { return 'HP' + billCodeCounter++; }
        function generateSampleNumber() { return sampleNumberCounter++; }

        function addPatient() {
            const patient = {
                firstName: document.getElementById("firstName").value,
                middleName: document.getElementById("middleName").value,
                lastName: document.getElementById("lastName").value,
                requestedBy: document.getElementById("requestedBy").value,
                referredBy: document.getElementById("referredBy").value,
                sex: document.getElementById("sex").value,
                age: document.getElementById("age").value,
                contact: document.getElementById("contact").value,
                date: document.getElementById("date").value,
                nepaliDate: document.getElementById("nepaliDate").value,
                paymentStatus: document.getElementById("paymentStatus").value,
                testName: document.getElementById("testName").value,
                billCode: generateBillCode(),
                sampleNumber: generateSampleNumber()
            };
            patients.push(patient);
            localStorage.setItem("patients", JSON.stringify(patients));
            alert("Patient added successfully!");
            showReportEntry();
        }

        function renderPatients() {
            const table = document.getElementById("patientTable");
            table.innerHTML = "";
            patients.forEach((p, index) => {
                const fullName = [p.firstName, p.middleName, p.lastName].filter(n => n).join(" ");
                const row = document.createElement("tr");
                row.innerHTML = `
            <td style="color:blue;cursor:pointer;" onclick="viewPatient(${index})">${fullName}</td>
            <td>${p.billCode}</td>
            <td>${p.testName}</td>
            <td>${p.requestedBy}</td>
            <td>${p.referredBy}</td>
            <td>${p.sex}</td>
            <td>${p.age}</td>
            <td>${p.contact}</td>
            <td>${p.date}</td>
            <td>${p.nepaliDate}</td>
            <td>${p.sampleNumber}</td>
            <td>${p.paymentStatus}</td>
            <td><button class="delete-btn" onclick="deletePatient(${index})">üóë Delete</button></td>
        `;
                table.appendChild(row);
            });
        }

        function deletePatient(index) {
            if (confirm("Are you sure to delete this patient?")) {
                patients.splice(index, 1);
                localStorage.setItem("patients", JSON.stringify(patients));
                renderPatients();
            }
        }

        function viewPatient(index) {
            localStorage.setItem("selectedPatient", JSON.stringify(patients[index]));
            window.location.href = "patient_details.html";
        }
    </script>

</body>

</html>